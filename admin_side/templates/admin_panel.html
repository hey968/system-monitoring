<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>admin panel</title>
    <link href="{{ url_for('static',filename='vendor/bootstrap-5.1.3-dist/css/bootstrap.min.css')}}" rel="stylesheet" >
    <script src="{{ url_for('static', filename='vendor/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js')}}"></script>
    <script src="{{ url_for('static', filename='vendor/jquery/jquery-3.6.0.min.js')}}"></script>
    <link href="{{ url_for('static',filename='css/admin_panel.css') }}" rel="stylesheet">

</head>
<body onload="startTime()">
<nav class="navbar bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="{{url_for('logout')}}" style="color:white;">exit</a>
      <div id="clock" style="text-align: right; color:white"></div>
  </div>
</nav>
{% if forms%}
{{forms | safe}}
{% endif %}
<div class="container-fluid">
    <div class="row">
        <div class="col-6" id="first_separator">
            <div class="table-responsive" >
                    <table class="table table-bordered table-hover table-dark" id="file_system_table">
                        <thead class="sticky-top bg-white">
                            <tr>
                                <th>date and time</th>
                                <th>event</th>
                                <th>file path</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for row in file_system_table %}
                            <tr>
                                <td>{{row.date_and_time}}</td>
                                 <td>{{row.event}}</td>
                                 <td>{{row.file}}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
            </div>
        </div>


        <div class="col-6" id="second_separator">
            <div class="table-responsive">
                    <table class="table table-bordered table-dark table-hover" id="rdp_connections_table">
                        <thead class="sticky-top bg-white">
                            <tr>

                                <th>ip</th>
                                <th>date and time</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for row in rdp_table %}
                            <tr>
                                <td>{{row.ip}}</td>
                                <td>{{row.date_and_time}}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>


            </div>
        </div>
    </div>
    {% if (web_table or user_anomaly_alert) %}
    <div class="row">
        <div class="col-6" id="third_separator">
            {% if web_table %}
            {{web_table | safe}}
            {% endif %}
        </div>
        <div class="col-6" id="forth_separator">
            {% if user_anomaly_alert %}
            {{ user_anomaly_alert | safe}}
            <form method="post">
                <input type="submit" name="no" value="not confirm (please run Security check)" style="background-color: red" class="btn btn-default">
                <input type="submit" name="yes" value="confirm (the user can use the computer)" style="background-color: green" class="btn btn-default">
            </form>
            {% endif %}
        </div>
    </div>
    {% endif %}
</div>
<script>
    function startTime() {
  const today = new Date();
  let h = today.getHours();
  let m = today.getMinutes();
  let s = today.getSeconds();
  let d = today.getDate();
  const month = ["January","February","March","April","May","June","July","August","September","October","November","December"];

  let cur_month = month[today.getMonth()];
  let y = today.getFullYear()
  m = checkTime(m);
  s = checkTime(s);
  document.getElementById('clock').innerHTML =  y+" " + cur_month + " " + d+"  "+ h + ":" + m + ":" + s;
  setTimeout(startTime, 1000);
}

function checkTime(i) {
  if (i < 10) {i = "0" + i};
  return i;
}
</script>
</body>
</html>